---
title: 前端代码规范
cover: https://t.alcy.cc/fj?t=1728210600
date: 2024-10-06 18:30
category: 软件开发
tag:     
    - ESLint
    - Prettier
    - Stylelint
    - VSCode
excerpt: false
---

## ESLint

`ESLint` 是一个用于 JavaScript 代码的静态代码分析工具，它可以帮助开发人员发现和修复代码中的问题，确保代码的质量和一致性

## Prettier

`Prettier` 关注于代码风格校验

### 配置 VSCode

在 `VSCode` 中安装 `Prettier - Code formatter` 插件

在项目根目录下创建 `.vscode` 文件夹，在文件夹下创建 `settings.json` 文件，添加以下配置

```json
{
  // 默认格式化工具
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  // 保存时自动格式化
  "editor.formatOnSave": true,
  // 设置 vue 文件保存时使用的格式化工具，一般不需要，因为已经设置了默认格式化工具
  "[vue]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  }
}
```

### Prettier 配置文件

在项目根目录下创建 `.prettierrc.yml` 文件（使用 `yaml` 格式是为了可以添加注释），并添加配置内容

```yaml
# 指定代码换行的长度
printWidth: 80
# tab缩进的空格数
tabWidth: 4
# 不使用 tab 缩进而是空格
useTabs: false
# 末尾是否添加分号
semi: false
# 使用单引号
singleQuote: true
# 在对象属性添加引号
quoteProps: 'as-needed'
# 在 jsx 中使用单引号而不是双引号
jsxSingleQuote: true
# 尾随逗号
trailingComma: 'all'
# 对象花括号和文本之间加空格
bracketSpacing: true
# 将多行标签元素的 > 放在最后一行的末尾，而不是单独放在下一行（不适用于自闭合元素）
bracketSameLine: true
# 在箭头函数参数周围加上括号
arrowParens: 'always'
# 指定 HTML文件的全局空白敏感性
htmlWhitespaceSensitivity: 'ignore'
```

### Prettier 忽略文件

在项目根目录下创建 `.prettierignore` 文件，并添加需要忽略的文件路径，它遵循 `.gitignore` 的规则

默认情况下，`prettier` 会忽略版本控制系统目录（`.git`、`.sl`、`.svn` 和 `.hg`）和 `node_modules` 中的文件

```text
# 忽略构建目录
build

# 忽略所有 HTML 文件
**/*.html

# 忽略特定文件
config.yml
```



## Stylelint

`Stylelint` 是一个用于检查样式代码的工具，它可以帮助开发人员发现和修复样式代码中的问题，确保样式代码的质量和一致性

### 在项目中引入 Stylelint

```bash
npm init stylelint
```

引入后会在项目根目录下生成 `.stylelintrc.json` 配置文件，可以根据需要进行配置

### 配置 VSCode

在 `VSCode` 中安装 `Stylelint` 插件

在项目根目录下创建 `.vscode` 文件夹，在文件夹下创建 `settings.json` 文件，添加以下配置

```json
{
  // 开启 Stylelint 检查
  "stylelint.validate":[
    "css",
    "scss",
    "postcss",
    "vue",
    "html"
  ],
  // 保存时自动修复
  "editor.codeActionsOnSave": {
    "source.fixAll.stylelint": true
  }
}
```

### Stylelint 配置文件

默认生成的配置文件内容如下：

```json
{
    "extends": ["stylelint-config-standard"] 
}
```

`extends` 属性可以从已有的 StyleLint 配置中继承规则，这里使用了 `stylelint-config-standard`

#### 校验 SCSS 文件

若想校验 SCSS 文件，需要安装 `stylelint-config-standard-scss`，并在配置文件的 `extends` 属性中添加

```bash
npm install stylelint-config-standard-scss --save-dev
```

```json
{
    "extends": ["stylelint-config-standard", "stylelint-config-standard-scss"]
}
```

#### 校验 Vue 文件

若想校验 Vue 文件，需要安装 `stylelint-config-recommended-vue`，并在配置文件的 `extends` 属性中添加

```bash
npm install stylelint-config-recommended-vue --save-dev
```

```json
{
    "extends": ["stylelint-config-recommended-vue"]
}
```

#### 校验 Vue 文件中的 SCSS

若想校验 Vue 文件中的 SCSS，需要安装 `stylelint-config-standard-scss` 和 `stylelint-config-recommended-vue`，并在配置文件的 `extends` 属性中添加

```bash
npm install stylelint-config-standard-scss stylelint-config-recommended-vue --save-dev
```

```json
{
    "extends": ["stylelint-config-standard-scss", "stylelint-config-recommended-vue/scss"]
}
```

#### 校验 HTML 或 Vue 模板中的 CSS

```json
{
    "extends": ["stylelint-config-standard"],
    "customSyntax": "postcss-html"
}
```

### Stylelint 忽略文件

`ignoreFiles` 配置项可以设置要忽略的文件路径，`Stylelint` 默认会忽略 `node_modules` 中的文件，配置 `ignoreFiles` 后将覆盖默认配置

```json
{
  "ignoreFiles": ["dist/**/*.css", "src/assets/**/*.css"]
}
```